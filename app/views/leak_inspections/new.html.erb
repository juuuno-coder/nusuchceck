<div class="max-w-2xl mx-auto py-8">
  <div class="text-center mb-8">
    <h1 class="text-3xl font-bold text-gray-900">📸 사진 한 장이면 충분해요</h1>
    <p class="mt-3 text-lg text-gray-600">누수가 걱정되시나요?</p>
    <p class="text-gray-600">사진으로 먼저 확인해보세요. 3초면 됩니다.</p>
    <div class="flex items-center justify-center gap-3 mt-4">
      <span class="inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
        </svg>
        무료
      </span>
      <span class="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
        </svg>
        로그인 불필요
      </span>
    </div>
  </div>

  <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8" data-controller="photo-upload">
    <%= form_with(model: @inspection, url: leak_inspections_path,
                  html: { multipart: true }, class: "space-y-6",
                  data: { controller: "form-validation", action: "submit->form-validation#submit" }) do |f| %>

      <%= render "shared/form_errors", resource: @inspection %>

      <!-- 사진 업로드 영역 -->
      <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-400 transition-colors cursor-pointer"
           data-photo-upload-target="dropzone"
           data-action="click->photo-upload#trigger dragover->photo-upload#dragover dragleave->photo-upload#dragleave drop->photo-upload#drop"
           role="button"
           tabindex="0"
           aria-label="사진 업로드 영역 - 클릭하거나 파일을 드래그하세요"
           data-action-keydown="keydown->photo-upload#keydown">

        <div data-photo-upload-target="placeholder">
          <svg class="mx-auto h-16 w-16 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                  d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                  d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          <p class="text-gray-700 mt-3 font-medium text-lg">📷 클릭해서 사진 올리기</p>
          <p class="text-sm text-gray-500 mt-2">또는 여기로 드래그하세요</p>
          <p class="text-xs text-gray-400 mt-1">JPG, PNG · 최대 5MB</p>
        </div>

        <img data-photo-upload-target="preview" class="hidden mx-auto max-h-64 rounded-lg shadow-md" alt="업로드된 사진 미리보기" />

        <%= f.file_field :photo, accept: "image/*", class: "hidden",
              data: { photo_upload_target: "input", action: "change->photo-upload#preview" } %>
      </div>

      <!-- 위치 설명 (선택) -->
      <div>
        <%= f.label :location_description, "어디에서 발견하셨나요?",
              class: "block text-sm font-medium text-gray-900 mb-2" %>
        <p class="text-xs text-gray-500 mb-2">💡 정확한 위치를 알려주시면 더 도움이 돼요 (선택사항)</p>
        <%= f.text_field :location_description,
              placeholder: "예: 거실 천장, 화장실 벽면, 주방 싱크대 아래",
              class: input_classes(:text) %>
      </div>

      <!-- 증상 유형 (선택) -->
      <div>
        <%= f.label :symptom_type, "어떤 증상인가요?",
              class: "block text-sm font-medium text-gray-900 mb-2" %>
        <p class="text-xs text-gray-500 mb-2">💡 비슷한 증상을 선택해주세요 (선택사항)</p>
        <%= f.select :symptom_type,
              options_for_select([
                ["벽면 누수", "wall_leak"],
                ["천장 누수", "ceiling_leak"],
                ["바닥 누수", "floor_leak"],
                ["배관 누수", "pipe_leak"],
                ["화장실 누수", "toilet_leak"],
                ["외부 누수", "outdoor_leak"]
              ], @inspection.symptom_type),
              { include_blank: "선택해주세요" },
              class: input_classes(:select) %>
      </div>

      <!-- 제출 버튼 -->
      <div>
        <%= f.submit "🔍 3초만에 확인하기",
              class: "w-full py-4 bg-blue-600 text-white rounded-xl font-bold text-lg hover:bg-blue-700 transition cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed opacity-50 cursor-not-allowed shadow-lg hover:shadow-xl",
              disabled: true,
              data: { photo_upload_target: "submitBtn",
                      turbo_submits_with: "⏱️ 분석 중이에요... 잠깐만 기다려주세요" } %>
        <p class="text-xs text-center text-gray-500 mt-2">무료이며, 개인정보는 수집하지 않아요</p>
      </div>
    <% end %>
  </div>

  <!-- 안내 사항 -->
  <div class="mt-8 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100">
    <div class="flex items-center gap-2 mb-4">
      <span class="text-2xl">💡</span>
      <h3 class="font-bold text-gray-900">선명한 사진일수록 정확해요</h3>
    </div>
    <ul class="space-y-3 text-sm text-gray-700">
      <li class="flex items-start gap-3">
        <span class="flex-shrink-0 w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold">✓</span>
        <span><strong>물방울, 얼룩, 곰팡이가</strong> 선명하게 보이도록</span>
      </li>
      <li class="flex items-start gap-3">
        <span class="flex-shrink-0 w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold">✓</span>
        <span><strong>밝은 조명에서</strong> 가까이 찍어주세요</span>
      </li>
      <li class="flex items-start gap-3">
        <span class="flex-shrink-0 w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold">✓</span>
        <span><strong>주변 환경도 함께</strong> 나오면 더 좋아요</span>
      </li>
    </ul>
    <div class="mt-4 pt-4 border-t border-blue-200">
      <p class="text-xs text-gray-600 flex items-center gap-2">
        <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
        </svg>
        <span>어두운 사진도 분석할 수 있지만, 결과가 덜 정확할 수 있어요</span>
      </p>
    </div>
  </div>
</div>
